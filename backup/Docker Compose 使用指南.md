# Docker Compose ä½¿ç”¨æŒ‡å—

## ğŸ“Œ 1. ä»€ä¹ˆæ˜¯ Docker Compose

Docker Compose æ˜¯ä¸€ä¸ª**ç”¨äºå®šä¹‰å’Œè¿è¡Œå¤šå®¹å™¨ Docker åº”ç”¨**çš„å·¥å…·ã€‚\
é€šè¿‡ä¸€ä¸ª `compose.yaml`ï¼ˆæˆ– `docker-compose.yml`ï¼‰æ–‡ä»¶ï¼Œä½ å¯ä»¥ï¼š

-   å®šä¹‰å¤šä¸ªæœåŠ¡ï¼ˆServiceï¼‰
-   é…ç½®é•œåƒã€æ„å»ºæ–¹å¼ã€ç«¯å£ã€ç½‘ç»œã€æ•°æ®å·
-   ç®¡ç†ç¯å¢ƒå˜é‡
-   ä¸€æ¡å‘½ä»¤å¯åŠ¨/åœæ­¢æ•´ä¸ªåº”ç”¨æ ˆ

**æ ¸å¿ƒç†å¿µï¼š**\
\> ä¸€æ¬¡å®šä¹‰ï¼Œåˆ°å¤„è¿è¡Œ

------------------------------------------------------------------------

## ğŸ“Œ 2. é€‚åˆä½¿ç”¨ Docker Compose çš„åœºæ™¯

âœ… é€‚åˆï¼š - æœ¬åœ°å¼€å‘ï¼ˆå‰ç«¯ + åç«¯ + æ•°æ®åº“ï¼‰ - å¾®æœåŠ¡æœ¬åœ°è°ƒè¯• -
è½»é‡çº§æµ‹è¯•ç¯å¢ƒ - CI/CD é›†æˆæµ‹è¯•

âš ï¸ ä¸å¤ªé€‚åˆï¼š - å¤§è§„æ¨¡ç”Ÿäº§é›†ç¾¤ï¼ˆé€šå¸¸ç”¨ Kubernetesï¼‰

------------------------------------------------------------------------

## ğŸ“Œ 3. Docker Compose æ ¸å¿ƒæ¦‚å¿µ

### ğŸ”¹ Serviceï¼ˆæœåŠ¡ï¼‰

æ¯ä¸ª `service` é€šå¸¸å¯¹åº”ä¸€ä¸ªå®¹å™¨ï¼ˆæˆ–ä¸€ç»„ç›¸åŒçš„å®¹å™¨ï¼‰ã€‚

### ğŸ”¹ Image vs Build

-   `image`ï¼šç›´æ¥ä½¿ç”¨å·²æœ‰é•œåƒ
-   `build`ï¼šåŸºäº Dockerfile æ„å»ºé•œåƒ

### ğŸ”¹ Networkï¼ˆç½‘ç»œï¼‰

Compose
é»˜è®¤ä¼šä¸ºæ‰€æœ‰æœåŠ¡åˆ›å»ºä¸€ä¸ª**å…±äº«ç½‘ç»œ**ï¼ŒæœåŠ¡ä¹‹é—´å¯ä»¥ç”¨**æœåŠ¡å**äº’ç›¸è®¿é—®ã€‚

### ğŸ”¹ Volumeï¼ˆæ•°æ®å·ï¼‰

ç”¨äºæ•°æ®æŒä¹…åŒ–ï¼Œä¾‹å¦‚æ•°æ®åº“æ–‡ä»¶ã€æ—¥å¿—ã€ç¼“å­˜ç­‰ã€‚

------------------------------------------------------------------------

## ğŸ“Œ 4. compose.yaml æ•™å­¦ç¤ºä¾‹

``` yaml
version: "3.9"

services:
  web:
    build: .
    image: express-demo:1.0
    container_name: node-app
    ports:
      - "30080:3000"
    volumes:
      - .:/app
      - node_modules:/app/node_modules
    environment:
      - NODE_ENV=development
    depends_on:
      - db

  db:
    image: mysql:8.0
    container_name: mysql-db
    restart: always
    environment:
      MYSQL_ROOT_PASSWORD: root123
      MYSQL_DATABASE: demo
    ports:
      - "3306:3306"
    volumes:
      - mysql_data:/var/lib/mysql

volumes:
  mysql_data:
  node_modules:
```

------------------------------------------------------------------------

## ğŸ“Œ 5. å¸¸ç”¨ Docker Compose å‘½ä»¤é€ŸæŸ¥

### å¯åŠ¨æœåŠ¡

``` bash
docker compose up
```

åå°è¿è¡Œï¼š

``` bash
docker compose up -d
```

### åœæ­¢æœåŠ¡

``` bash
docker compose down
```

### æŸ¥çœ‹çŠ¶æ€

``` bash
docker compose ps
```

### æŸ¥çœ‹æ—¥å¿—

``` bash
docker compose logs
docker compose logs -f
```

### é‡æ–°æ„å»ºé•œåƒå¹¶å¯åŠ¨

``` bash
docker compose up -d --build
```

### è¿›å…¥å®¹å™¨

``` bash
docker compose exec web sh
```

------------------------------------------------------------------------

## ğŸ“Œ 6. ç½‘ç»œé€šä¿¡è§„åˆ™

åœ¨ Docker Compose ä¸­ï¼š - **æœåŠ¡å = ä¸»æœºå** - ä¾‹å¦‚ï¼š`web` æœåŠ¡å¯ä»¥ç”¨
`mysql://db:3306` è®¿é—®æ•°æ®åº“

------------------------------------------------------------------------

## ğŸ“Œ 7. Volumeï¼ˆæ•°æ®æŒä¹…åŒ–ï¼‰

### åŒ¿åå·

``` yaml
volumes:
  - /app/node_modules
```

### å‘½åå·ï¼ˆæ¨èï¼‰

``` yaml
volumes:
  - mysql_data:/var/lib/mysql
```

------------------------------------------------------------------------

## ğŸ“Œ 8. Docker Compose vs Docker

  å¯¹æ¯”       Docker     Docker Compose
  ---------- ---------- ----------------
  ç®¡ç†å®¹å™¨   å•ä¸ª       å¤šä¸ª
  é…ç½®æ–¹å¼   CLI        YAML
  é€‚åˆåœºæ™¯   ç®€å•å®¹å™¨   å®Œæ•´åº”ç”¨æ ˆ

------------------------------------------------------------------------

## ğŸ“Œ 9. Docker Compose vs Kubernetesï¼ˆç®€è¦ï¼‰

  å¯¹æ¯”     Compose    Kubernetes
  -------- ---------- ------------
  ç›®æ ‡     æœ¬åœ°å¼€å‘   ç”Ÿäº§é›†ç¾¤
  å¤æ‚åº¦   ç®€å•       å¤æ‚
  æ‰©ç¼©å®¹   åŸºæœ¬       å¼ºå¤§
  æŒä¹…åŒ–   Volume     PV/PVC

------------------------------------------------------------------------

## ğŸ“Œ 10. å­¦ä¹ å»ºè®®

1.  å…ˆå­¦ Docker åŸºç¡€
2.  æŒæ¡ Dockerfile
3.  å­¦ä¼š Docker Compose
4.  å†è¿›é˜¶ Kubernetes

------------------------------------------------------------------------

## ğŸ“Œ 11. å¸¸è§é—®é¢˜ï¼ˆFAQï¼‰

**Qï¼šcompose.yaml å’Œ docker-compose.yml æœ‰åŒºåˆ«å—ï¼Ÿ**\
Aï¼šåŠŸèƒ½ç›¸åŒï¼Œæ–°ç‰ˆæ¨èä½¿ç”¨ `compose.yaml`ã€‚

**Qï¼šæ”¹ä»£ç åéœ€è¦é‡å¯å—ï¼Ÿ**\
Aï¼šå¦‚æœæŒ‚è½½äº†æºç å·ï¼ˆvolumesï¼‰ï¼Œé€šå¸¸ä¸éœ€è¦é‡å¯ã€‚

------------------------------------------------------------------------
