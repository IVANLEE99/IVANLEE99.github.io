# Kubernetesï¼ˆK8Sï¼‰å…¥é—¨æŒ‡å—

## ğŸ“Œ 1. ä»€ä¹ˆæ˜¯ Kubernetesï¼ˆK8Sï¼‰

Kubernetesï¼ˆç®€ç§°
**K8S**ï¼‰æ˜¯ä¸€ä¸ª**å¼€æºçš„å®¹å™¨ç¼–æ’å¹³å°**ï¼Œç”¨äºè‡ªåŠ¨åŒ–éƒ¨ç½²ã€æ‰©å±•å’Œç®¡ç†å®¹å™¨åŒ–åº”ç”¨ã€‚

ä½ å¯ä»¥æŠŠå®ƒç†è§£ä¸ºï¼š\
\> **"ç®¡ç†å¤§é‡ Docker å®¹å™¨çš„æ“ä½œç³»ç»Ÿ"**

å®ƒèƒ½å¸®ä½ ï¼š - è‡ªåŠ¨éƒ¨ç½²å®¹å™¨ - è‡ªåŠ¨é‡å¯å¤±è´¥çš„å®¹å™¨ - è‡ªåŠ¨æ‰©ç¼©å®¹ - è´Ÿè½½å‡è¡¡ -
æ»šåŠ¨æ›´æ–° - é…ç½®ç®¡ç† - æœåŠ¡å‘ç°

------------------------------------------------------------------------

## ğŸ“Œ 2. Kubernetes èƒ½è§£å†³ä»€ä¹ˆé—®é¢˜ï¼Ÿ

åœ¨æ²¡æœ‰ K8S ä¹‹å‰ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°ï¼š - å®¹å™¨æŒ‚äº†æ²¡äººé‡å¯ - æµé‡ä¸€å¤§ç³»ç»Ÿå´©æºƒ -
å¤šå°æœåŠ¡å™¨ä¸å¥½ç®¡ç† - å‘å¸ƒæ–°ç‰ˆæœ¬é£é™©é«˜ - é…ç½®æ•£è½åœ¨å„å¤„

ğŸ‘‰ **Kubernetes è§£å†³çš„æ ¸å¿ƒé—®é¢˜ï¼š** - **ç¨³å®šæ€§**ï¼šè‡ªåŠ¨é‡å¯ã€å¥åº·æ£€æŸ¥ -
**å¯æ‰©å±•æ€§**ï¼šæ”¯æŒæ¨ªå‘æ‰©å±•ï¼ˆåŠ  Podï¼‰ - **å¯ç»´æŠ¤æ€§**ï¼šç»Ÿä¸€ç®¡ç†å®¹å™¨ -
**å¯å‘å¸ƒæ€§**ï¼šæ”¯æŒæ»šåŠ¨å‘å¸ƒã€å›æ»š

------------------------------------------------------------------------

## ğŸ“Œ 3. Kubernetes æ ¸å¿ƒæ¶æ„ï¼ˆç®€åŒ–ç‰ˆï¼‰

### ğŸ¯ Control Planeï¼ˆæ§åˆ¶å¹³é¢ï¼‰

è´Ÿè´£"æŒ‡æŒ¥æ•´ä¸ªé›†ç¾¤"ï¼ŒåŒ…å«ï¼š - **API Server**ï¼šK8S çš„å…¥å£ -
**Scheduler**ï¼šå†³å®š Pod è¿è¡Œåœ¨å“ªä¸ªèŠ‚ç‚¹ - **Controller
Manager**ï¼šä¿è¯é›†ç¾¤çŠ¶æ€ç¬¦åˆæœŸæœ› - **etcd**ï¼šä¿å­˜é›†ç¾¤çš„æ‰€æœ‰çŠ¶æ€

### ğŸ¯ Nodeï¼ˆå·¥ä½œèŠ‚ç‚¹ï¼‰

çœŸæ­£è¿è¡Œå®¹å™¨çš„æœºå™¨ï¼ŒåŒ…å«ï¼š - **kubelet**ï¼šç®¡ç† Pod -
**kube-proxy**ï¼šè´Ÿè´£ç½‘ç»œ - **Container Runtime**ï¼šå¦‚ Docker / containerd

------------------------------------------------------------------------

## ğŸ“Œ 4. Kubernetes æ ¸å¿ƒå¯¹è±¡ï¼ˆå¿…é¡»æŒæ¡ï¼‰

### ğŸ”¹ Podï¼ˆæœ€å°è¿è¡Œå•å…ƒï¼‰

-   ä½ è¿è¡Œå®¹å™¨çš„åœ°æ–¹
-   ä¸€ä¸ª Pod é‡Œå¯ä»¥æœ‰å¤šä¸ªå®¹å™¨
-   **ä¸€èˆ¬ä¸ä¼šç›´æ¥åˆ›å»º Podï¼Œè€Œæ˜¯ç”¨ Deployment ç®¡ç†**

ç¤ºä¾‹ï¼špod.yaml

``` yaml
apiVersion: v1
kind: Pod
metadata:
  name: demo-pod
spec:
  containers:
    - name: app
      image: nginx:latest
      ports:
        - containerPort: 80
```

------------------------------------------------------------------------

### ğŸ”¹ Deploymentï¼ˆéƒ¨ç½²ç®¡ç†ï¼‰

-   ç”¨æ¥ç®¡ç† Pod
-   æ”¯æŒå‰¯æœ¬ã€å‰¯æœ¬æ‰©ç¼©ã€æ»šåŠ¨æ›´æ–°

ç¤ºä¾‹ï¼šdeployment.yaml

``` yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: nginx-deploy
spec:
  replicas: 2
  selector:
    matchLabels:
      app: nginx
  template:
    metadata:
      labels:
        app: nginx
    spec:
      containers:
        - name: nginx
          image: nginx:latest
          ports:
            - containerPort: 80
```

------------------------------------------------------------------------

### ğŸ”¹ Serviceï¼ˆæœåŠ¡æš´éœ²ï¼‰

-   è®©å¤–éƒ¨æˆ–å†…éƒ¨è®¿é—® Pod
-   è´Ÿè´£è´Ÿè½½å‡è¡¡

ç¤ºä¾‹ï¼šservice.yaml

``` yaml
apiVersion: v1
kind: Service
metadata:
  name: nginx-svc
spec:
  type: NodePort
  selector:
    app: nginx
  ports:
    - port: 80
      targetPort: 80
      nodePort: 30080
```

------------------------------------------------------------------------

## ğŸ“Œ 5. Kubernetes å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥

### æŸ¥çœ‹é›†ç¾¤çŠ¶æ€

``` bash
kubectl cluster-info
```

### æŸ¥çœ‹æ‰€æœ‰ Pod

``` bash
kubectl get pods
```

### æŸ¥çœ‹ Deployment

``` bash
kubectl get deployment
```

### æŸ¥çœ‹ Service

``` bash
kubectl get svc
```

### éƒ¨ç½²åº”ç”¨

``` bash
kubectl apply -f deployment.yaml
```

### åˆ é™¤åº”ç”¨

``` bash
kubectl delete -f deployment.yaml
```

### æŸ¥çœ‹ Pod è¯¦ç»†ä¿¡æ¯

``` bash
kubectl describe pod <pod-name>
```

### æŸ¥çœ‹æ—¥å¿—

``` bash
kubectl logs <pod-name>
```

------------------------------------------------------------------------

## ğŸ“Œ 6. ConfigMapï¼ˆé…ç½®ç®¡ç†ï¼‰

ç”¨äºå­˜å‚¨é…ç½®ï¼Œè€Œä¸æ˜¯å†™æ­»åœ¨é•œåƒé‡Œã€‚

ç¤ºä¾‹ï¼šconfigmap.yaml

``` yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: app-config
data:
  APP_ENV: "production"
  APP_PORT: "3000"
```

åœ¨ Pod é‡Œä½¿ç”¨ï¼š

``` yaml
envFrom:
  - configMapRef:
      name: app-config
```

------------------------------------------------------------------------

## ğŸ“Œ 7. Kubernetes vs Docker Composeï¼ˆå¯¹ç…§ï¼‰

  Docker Compose   Kubernetes
  ---------------- --------------------
  Service          Deployment
  ports            Service
  volumes          PV / PVC
  environment      ConfigMap / Secret

------------------------------------------------------------------------

## ğŸ“Œ 8. æœ¬åœ°å…¥é—¨å»ºè®®ï¼ˆå­¦ä¹ è·¯çº¿ï¼‰

### âœ… é˜¶æ®µ 1ï¼šæœ¬åœ°ç¯å¢ƒ

-   å®‰è£… Docker Desktop
-   å¯ç”¨ Kubernetes

### âœ… é˜¶æ®µ 2ï¼šåŸºç¡€æ¦‚å¿µ

-   å­¦ä¼š Pod / Deployment / Service

### âœ… é˜¶æ®µ 3ï¼šå®æˆ˜

-   éƒ¨ç½² Node + Express
-   éƒ¨ç½² MySQL
-   é…ç½® ConfigMap

------------------------------------------------------------------------

## ğŸ“Œ 9. å¸¸è§é—®é¢˜ï¼ˆFAQï¼‰

**Qï¼šK8S å’Œ Docker ä»€ä¹ˆå…³ç³»ï¼Ÿ**\
Aï¼šDocker æ˜¯å®¹å™¨ï¼ŒK8S æ˜¯ç®¡ç†å®¹å™¨çš„ç³»ç»Ÿã€‚

**Qï¼šä¸€å®šè¦å­¦ Docker æ‰èƒ½å­¦ K8S å—ï¼Ÿ**\
Aï¼šå¼ºçƒˆå»ºè®®å…ˆå­¦ Dockerã€‚

------------------------------------------------------------------------
```
ä½ çš„ç”µè„‘
â”‚
â”œâ”€â”€ Docker Desktop
â”‚   â”œâ”€â”€ Dockerï¼ˆè·‘å®¹å™¨ï¼‰
â”‚   â””â”€â”€ Kubernetesï¼ˆæœ¬åœ° K8S é›†ç¾¤ï¼‰ â†â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                          â”‚
â”‚                                Zadig å¯ä»¥â€œæ¥ç®¡/è¿æ¥â€
â”‚                                          â”‚
â””â”€â”€ Zadigï¼ˆDevOps å¹³å°ï¼‰ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â†“
  å¸®ä½ è‡ªåŠ¨æ„å»ºé•œåƒ + éƒ¨ç½²åˆ° K8S

```
